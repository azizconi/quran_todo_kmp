package tj.app.quran_todo.common.i18n

import androidx.compose.runtime.staticCompositionLocalOf

enum class AppLanguage(val displayName: String) {
    EN("English"),
    RU("Русский"),
    UZ("O'zbek"),
    TG("Тоҷикӣ"),
    TR("Türkçe"),
}

val AppLanguage.code: String
    get() = when (this) {
        AppLanguage.EN -> "en"
        AppLanguage.RU -> "ru"
        AppLanguage.UZ -> "uz"
        AppLanguage.TG -> "tg"
        AppLanguage.TR -> "tr"
    }

fun languageFromCode(code: String?): AppLanguage {
    val normalized = code?.lowercase() ?: return AppLanguage.EN
    return when {
        normalized.startsWith("ru") -> AppLanguage.RU
        normalized.startsWith("tg") -> AppLanguage.TG
        normalized.startsWith("uz") -> AppLanguage.UZ
        normalized.startsWith("tr") -> AppLanguage.TR
        else -> AppLanguage.EN
    }
}

fun editionForLanguage(language: AppLanguage): String = when (language) {
    AppLanguage.EN -> "en.sahih"
    AppLanguage.RU -> "ru.kuliev"
    AppLanguage.UZ -> "uz.sodik"
    AppLanguage.TG -> "tg.ayati"
    AppLanguage.TR -> "tr.yazir"
}

fun localizeRevelationPlace(value: String, strings: AppStrings): String {
    val normalized = value.lowercase()
    return when {
        normalized.contains("meccan") || normalized.contains("makka") || normalized.contains("мекка") ->
            strings.meccaLabel
        normalized.contains("medinan") || normalized.contains("madina") || normalized.contains("медина") ->
            strings.medinaLabel
        else -> value
    }
}

data class AppStrings(
    val appName: String,
    val homeTitle: String,
    val homeSubtitle: String,
    val statsTitle: String,
    val settingsTitle: String,
    val languageLabel: String,
    val themeLabel: String,
    val themeLight: String,
    val themeDark: String,
    val themeStyleLabel: String,
    val themeSand: String,
    val themeOcean: String,
    val themeForest: String,
    val dailyGoalLabel: String,
    val focusMinutesLabel: String,
    val remindersLabel: String,
    val statsSurahs: String,
    val statsAyahs: String,
    val totalLabel: String,
    val learnedLabel: String,
    val learningLabel: String,
    val noStateLabel: String,
    val planTitle: String,
    val planSubtitle: String,
    val todayProgressLabel: String,
    val reviewDueTitle: String,
    val reviewNowLabel: String,
    val reviewEmptyLabel: String,
    val reminderTitle: String,
    val reminderBody: String,
    val streakLabel: String,
    val bestDayLabel: String,
    val avgPerDayLabel: String,
    val focusMinutesStatsLabel: String,
    val focusSessionTitle: String,
    val focusSessionSubtitle: String,
    val focusStartLabel: String,
    val focusStopLabel: String,
    val focusDoneLabel: String,
    val enabledLabel: String,
    val disabledLabel: String,
    val noteTitle: String,
    val notePlaceholder: String,
    val saveLabel: String,
    val filterAll: String,
    val filterLearned: String,
    val filterLearning: String,
    val selectionLabel: String,
    val actionsLabel: String,
    val resetSelection: String,
    val focusTitle: String,
    val focusSubtitle: String,
    val startFocus: String,
    val noLearningYet: String,
    val statusLabel: String,
    val clearLabel: String,
    val surahLabel: String,
    val ayahsLabel: String,
    val revelationOrderLabel: String,
    val meccaLabel: String,
    val medinaLabel: String,
    val insightsTitle: String,
    val goalTitle: String,
    val goalSubtitle: String,
    val progressTitle: String,
    val progressSubtitle: String,
)

fun stringsFor(language: AppLanguage): AppStrings = when (language) {
    AppLanguage.EN -> AppStrings(
        appName = "Quran Todo",
        homeTitle = "Progress",
        homeSubtitle = "Build daily momentum with small steps",
        statsTitle = "Statistics",
        settingsTitle = "Settings",
        languageLabel = "Language",
        themeLabel = "Theme",
        themeLight = "Light",
        themeDark = "Dark",
        themeStyleLabel = "Style",
        themeSand = "Sand",
        themeOcean = "Ocean",
        themeForest = "Forest",
        dailyGoalLabel = "Daily goal",
        focusMinutesLabel = "Focus minutes",
        remindersLabel = "Gentle reminders",
        statsSurahs = "Surahs",
        statsAyahs = "Ayahs",
        totalLabel = "Total",
        learnedLabel = "Learned",
        learningLabel = "Learning",
        noStateLabel = "No status",
        planTitle = "Your plan",
        planSubtitle = "Today’s goal and momentum",
        todayProgressLabel = "Today",
        reviewDueTitle = "Reviews due",
        reviewNowLabel = "Review now",
        reviewEmptyLabel = "No reviews due",
        reminderTitle = "We missed you",
        reminderBody = "It’s been a couple days. Want to continue?",
        streakLabel = "Streak",
        bestDayLabel = "Best day",
        avgPerDayLabel = "Avg / day",
        focusMinutesStatsLabel = "Focus minutes",
        focusSessionTitle = "Focus session",
        focusSessionSubtitle = "Stay present and review calmly",
        focusStartLabel = "Start",
        focusStopLabel = "Pause",
        focusDoneLabel = "Finish",
        enabledLabel = "On",
        disabledLabel = "Off",
        noteTitle = "Note",
        notePlaceholder = "Add a note",
        saveLabel = "Save",
        filterAll = "All",
        filterLearned = "Learned",
        filterLearning = "Learning",
        selectionLabel = "Selected",
        actionsLabel = "Actions",
        resetSelection = "Clear selection",
        focusTitle = "Focus session",
        focusSubtitle = "Continue where you left off",
        startFocus = "Start session",
        noLearningYet = "No learning surahs yet",
        statusLabel = "Status",
        clearLabel = "Clear",
        surahLabel = "Surah",
        ayahsLabel = "Ayahs",
        revelationOrderLabel = "Revelation order",
        meccaLabel = "Mecca",
        medinaLabel = "Medina",
        insightsTitle = "Insights",
        goalTitle = "Daily goal",
        goalSubtitle = "Suggested ayahs per day",
        progressTitle = "Overall progress",
        progressSubtitle = "Based on learned ayahs",
    )
    AppLanguage.RU -> AppStrings(
        appName = "Quran Todo",
        homeTitle = "Прогресс",
        homeSubtitle = "Небольшие шаги каждый день",
        statsTitle = "Статистика",
        settingsTitle = "Настройки",
        languageLabel = "Язык",
        themeLabel = "Тема",
        themeLight = "Светлая",
        themeDark = "Темная",
        themeStyleLabel = "Стиль",
        themeSand = "Песок",
        themeOcean = "Океан",
        themeForest = "Лес",
        dailyGoalLabel = "Цель на день",
        focusMinutesLabel = "Фокус, минут",
        remindersLabel = "Мягкие напоминания",
        statsSurahs = "Суры",
        statsAyahs = "Аяты",
        totalLabel = "Всего",
        learnedLabel = "Выучил",
        learningLabel = "Заучиваю",
        noStateLabel = "Без статуса",
        planTitle = "Ваш план",
        planSubtitle = "Цель на сегодня и темп",
        todayProgressLabel = "Сегодня",
        reviewDueTitle = "Повторы",
        reviewNowLabel = "Повторить",
        reviewEmptyLabel = "Нет повторов",
        reminderTitle = "Скучаем по вам",
        reminderBody = "Пара дней без прогресса. Продолжим?",
        streakLabel = "Серия",
        bestDayLabel = "Лучший день",
        avgPerDayLabel = "Среднее / день",
        focusMinutesStatsLabel = "Минуты фокуса",
        focusSessionTitle = "Фокус-сессия",
        focusSessionSubtitle = "Спокойная концентрация на повторении",
        focusStartLabel = "Начать",
        focusStopLabel = "Пауза",
        focusDoneLabel = "Завершить",
        enabledLabel = "Вкл",
        disabledLabel = "Выкл",
        noteTitle = "Заметка",
        notePlaceholder = "Добавьте заметку",
        saveLabel = "Сохранить",
        filterAll = "Все",
        filterLearned = "Выучил",
        filterLearning = "Заучиваю",
        selectionLabel = "Выбрано",
        actionsLabel = "Действия",
        resetSelection = "Сбросить выбранные",
        focusTitle = "Фокус-сессия",
        focusSubtitle = "Продолжить с места остановки",
        startFocus = "Начать",
        noLearningYet = "Пока нет сур в изучении",
        statusLabel = "Статус",
        clearLabel = "Сбросить",
        surahLabel = "Сура",
        ayahsLabel = "Аятов",
        revelationOrderLabel = "Ниспослано",
        meccaLabel = "Мекка",
        medinaLabel = "Медина",
        insightsTitle = "Инсайты",
        goalTitle = "Дневная цель",
        goalSubtitle = "Рекомендуемое число аятов",
        progressTitle = "Общий прогресс",
        progressSubtitle = "По выученным аятам",
    )
    AppLanguage.UZ -> AppStrings(
        appName = "Quran Todo",
        homeTitle = "Progress",
        homeSubtitle = "Har kuni kichik qadamlar",
        statsTitle = "Statistika",
        settingsTitle = "Sozlamalar",
        languageLabel = "Til",
        themeLabel = "Mavzu",
        themeLight = "Yorug'",
        themeDark = "Qorong'i",
        themeStyleLabel = "Uslub",
        themeSand = "Qum",
        themeOcean = "Okean",
        themeForest = "O'rmon",
        dailyGoalLabel = "Kunlik maqsad",
        focusMinutesLabel = "Fokus daqiqalari",
        remindersLabel = "Yengil eslatmalar",
        statsSurahs = "Suralar",
        statsAyahs = "Oyatlar",
        totalLabel = "Jami",
        learnedLabel = "Yodlangan",
        learningLabel = "Yodlayapman",
        noStateLabel = "Holatsiz",
        planTitle = "Reja",
        planSubtitle = "Bugungi maqsad va ritm",
        todayProgressLabel = "Bugun",
        reviewDueTitle = "Takrorlashlar",
        reviewNowLabel = "Takrorlash",
        reviewEmptyLabel = "Takrorlash yoq",
        reminderTitle = "Sizni sogindik",
        reminderBody = "Bir necha kun tanaffus. Davom etamizmi?",
        streakLabel = "Ketma-ketlik",
        bestDayLabel = "Eng yaxshi kun",
        avgPerDayLabel = "O'rtacha / kun",
        focusMinutesStatsLabel = "Fokus daqiqalari",
        focusSessionTitle = "Fokus sessiya",
        focusSessionSubtitle = "Tinch va diqqat bilan takrorlash",
        focusStartLabel = "Boshlash",
        focusStopLabel = "Pauza",
        focusDoneLabel = "Tugatish",
        enabledLabel = "Yoqilgan",
        disabledLabel = "O'chirilgan",
        noteTitle = "Eslatma",
        notePlaceholder = "Eslatma yozing",
        saveLabel = "Saqlash",
        filterAll = "Barchasi",
        filterLearned = "Yodlangan",
        filterLearning = "Yodlayapman",
        selectionLabel = "Tanlangan",
        actionsLabel = "Amallar",
        resetSelection = "Tanlovni tozalash",
        focusTitle = "Fokus sessiya",
        focusSubtitle = "Toxtagan joydan davom etish",
        startFocus = "Boshlash",
        noLearningYet = "Hozircha organilayotgan sura yoq",
        statusLabel = "Holat",
        clearLabel = "Tozalash",
        surahLabel = "Sura",
        ayahsLabel = "Oyatlar",
        revelationOrderLabel = "Nozil bolish tartibi",
        meccaLabel = "Makka",
        medinaLabel = "Madina",
        insightsTitle = "Insights",
        goalTitle = "Kundalik maqsad",
        goalSubtitle = "Kunlik tavsiya etilgan oyatlar",
        progressTitle = "Umumiy progress",
        progressSubtitle = "Yodlangan oyatlar boyicha",
    )
    AppLanguage.TG -> AppStrings(
        appName = "Quran Todo",
        homeTitle = "Пешрафт",
        homeSubtitle = "Қадамҳои хурд ҳар рӯз",
        statsTitle = "Омор",
        settingsTitle = "Танзимот",
        languageLabel = "Забон",
        themeLabel = "Мавзӯъ",
        themeLight = "Рӯшан",
        themeDark = "Торик",
        themeStyleLabel = "Сабк",
        themeSand = "Қум",
        themeOcean = "Уқёнус",
        themeForest = "Ҷангал",
        dailyGoalLabel = "Ҳадафи рӯзона",
        focusMinutesLabel = "Фокус, дақиқа",
        remindersLabel = "Ёдрасҳои нарм",
        statsSurahs = "Сураҳо",
        statsAyahs = "Оятҳо",
        totalLabel = "Ҳамагӣ",
        learnedLabel = "Ёд карда",
        learningLabel = "Ёд мекунам",
        noStateLabel = "Бе ҳолат",
        planTitle = "Нақша",
        planSubtitle = "Ҳадафи имрӯз ва суръат",
        todayProgressLabel = "Имрӯз",
        reviewDueTitle = "Такрорҳо",
        reviewNowLabel = "Такрор кардан",
        reviewEmptyLabel = "Такрор нест",
        reminderTitle = "Мо шуморо пазмон шудем",
        reminderBody = "Чанд рӯз пешрафт набуд. Давом медиҳем?",
        streakLabel = "Раҳпаймоӣ",
        bestDayLabel = "Беҳтарин рӯз",
        avgPerDayLabel = "Миёна / рӯз",
        focusMinutesStatsLabel = "Дақиқаҳои фокус",
        focusSessionTitle = "Сессияи фокус",
        focusSessionSubtitle = "Бо оромӣ ва диққат такрор кунед",
        focusStartLabel = "Оғоз",
        focusStopLabel = "Таваққуф",
        focusDoneLabel = "Анҷом",
        enabledLabel = "Фаъол",
        disabledLabel = "Хомӯш",
        noteTitle = "Ёддошт",
        notePlaceholder = "Ёддошт илова кунед",
        saveLabel = "Нигоҳ доштан",
        filterAll = "Ҳама",
        filterLearned = "Ёд карда",
        filterLearning = "Ёд мекунам",
        selectionLabel = "Интихоб",
        actionsLabel = "Амалҳо",
        resetSelection = "Тоза кардан",
        focusTitle = "Сессияи фокус",
        focusSubtitle = "Аз ҷойи пешина идома диҳед",
        startFocus = "Оғоз",
        noLearningYet = "Ҳоло сураи дар омӯзиш нест",
        statusLabel = "Ҳолат",
        clearLabel = "Тоза кардан",
        surahLabel = "Сура",
        ayahsLabel = "Оятҳо",
        revelationOrderLabel = "Нузул",
        meccaLabel = "Макка",
        medinaLabel = "Мадина",
        insightsTitle = "Назарҳо",
        goalTitle = "Ҳадафи рӯзона",
        goalSubtitle = "Оятҳои тавсияшуда дар рӯз",
        progressTitle = "Пешрафти умумӣ",
        progressSubtitle = "Аз рӯи оятҳои ёдшуда",
    )
    AppLanguage.TR -> AppStrings(
        appName = "Quran Todo",
        homeTitle = "Ilerleme",
        homeSubtitle = "Her gun kucuk adimlar",
        statsTitle = "Istatistik",
        settingsTitle = "Ayarlar",
        languageLabel = "Dil",
        themeLabel = "Tema",
        themeLight = "Açık",
        themeDark = "Koyu",
        themeStyleLabel = "Stil",
        themeSand = "Kum",
        themeOcean = "Okyanus",
        themeForest = "Orman",
        dailyGoalLabel = "Gunluk hedef",
        focusMinutesLabel = "Odak dakikasi",
        remindersLabel = "Nazik hatirlatmalar",
        statsSurahs = "Sureler",
        statsAyahs = "Ayetler",
        totalLabel = "Toplam",
        learnedLabel = "Ezberlendi",
        learningLabel = "Ezberleniyor",
        noStateLabel = "Durum yok",
        planTitle = "Planin",
        planSubtitle = "Bugunun hedefi ve ritmi",
        todayProgressLabel = "Bugun",
        reviewDueTitle = "Tekrarlar",
        reviewNowLabel = "Tekrar et",
        reviewEmptyLabel = "Tekrar yok",
        reminderTitle = "Seni ozledik",
        reminderBody = "Birkaç gündür yokuz. Devam edelim mi?",
        streakLabel = "Seri",
        bestDayLabel = "En iyi gun",
        avgPerDayLabel = "Ortalama / gun",
        focusMinutesStatsLabel = "Odak dakikalari",
        focusSessionTitle = "Odak oturumu",
        focusSessionSubtitle = "Sakin ve dikkatli tekrar",
        focusStartLabel = "Baslat",
        focusStopLabel = "Duraklat",
        focusDoneLabel = "Bitir",
        enabledLabel = "Açık",
        disabledLabel = "Kapalı",
        noteTitle = "Not",
        notePlaceholder = "Not ekle",
        saveLabel = "Kaydet",
        filterAll = "Hepsi",
        filterLearned = "Ezberlendi",
        filterLearning = "Ezberleniyor",
        selectionLabel = "Secili",
        actionsLabel = "Islemler",
        resetSelection = "Secimi temizle",
        focusTitle = "Odak oturumu",
        focusSubtitle = "Kaldigin yerden devam et",
        startFocus = "Baslat",
        noLearningYet = "Henuz ezberlenen sure yok",
        statusLabel = "Durum",
        clearLabel = "Temizle",
        surahLabel = "Sure",
        ayahsLabel = "Ayetler",
        revelationOrderLabel = "Nuzul sirasi",
        meccaLabel = "Mekke",
        medinaLabel = "Medine",
        insightsTitle = "Ongoruler",
        goalTitle = "Gunluk hedef",
        goalSubtitle = "Gunluk onerilen ayet sayisi",
        progressTitle = "Genel ilerleme",
        progressSubtitle = "Ezberlenen ayetlere gore",
    )
}

val LocalAppStrings = staticCompositionLocalOf { stringsFor(AppLanguage.EN) }
val LocalAppLanguage = staticCompositionLocalOf { AppLanguage.EN }
val LocalAppLanguageSetter = staticCompositionLocalOf<(AppLanguage) -> Unit> { {} }
